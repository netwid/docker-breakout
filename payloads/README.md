# Payloads

## Принцип загрузки

Директория `payloads` архивируется, после чего полученный `.tar.gz` архив записывается в C-файл как массив байтов и его длина.

В дальнейшем этот архив воспроизводится на хостовой системе командой `echo -ne '\xff...'` и там же разархивируется.

После чего все shell скрипты запускаются командой `for f in *.sh; do bash "$f"; done`

Смотреть функцию `get_payload_string` в [utils.c](../exploits/utils.c)

## Список

### Добавление ssh ключа

Заменить `id_rsa.pub` на свой публичный ssh ключ, который будет добавлен в `~/.ssh/authorized_keys`

### Добавление root-юзера

Так как смена пароля root достаточно заметна, можно создать своего юзера с `uid = 0` и `gid = 0`.
Скрипт создаёт такого пользователя `hacked:hacked`

### Reverse shell

В скрипте указывается ip и port хоста, на котором запущен listener подключений.
То есть на атакующем хосте должна быть выполнена команда

```bash
nc -lvnp *port*
```

В скрипте используется стандартный reverse shell через bash.
Для экспериментов с другими видами советую https://www.revshells.com/